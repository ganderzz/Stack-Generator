<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Stack Generator</title>
    <meta name="title" content="Stack Generator" />
    <meta
      name="description"
      content="Create your favorite technology stack in miliseconds!"
    />
    <meta
      name="keywords"
      content="technology, programming, stack, generator, html, css, javascript, java, swift, php, python, php, colbol, go, kotlin, zig, nim, ruby, powerpoint, word, excel, docker, helm, kuberneters, apache, nginx, c, c#"
    />
    <meta name="robots" content="index, follow" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="language" content="English" />
    <meta name="author" content="Dylan Paulus" />

    <link
      rel="icon"
      type="image/svg+xml"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%22256%22 height=%22256%22 viewBox=%220 0 100 100%22><rect width=%22100%22 height=%22100%22 rx=%2220%22 fill=%22%234191cd%22></rect><text x=%2250%%22 y=%2250%%22 dominant-baseline=%22central%22 text-anchor=%22middle%22 font-size=%2269%22>ðŸ¥ž</text></svg>"
    />

    <link
      href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <script
      src="https://kit.fontawesome.com/410763451c.js"
      crossorigin="anonymous"
    ></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap"
      rel="stylesheet"
    />

    <style>
      * {
        box-sizing: border-box;
      }
      html {
        height: 100%;
        margin: 0;
        padding: 0;
        font-family: "Inter", sans-serif;
        background-color: #111827;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1600 900'%3E%3Cdefs%3E%3ClinearGradient id='a' x1='0' x2='0' y1='1' y2='0' gradientTransform='rotate(271,0.5,0.5)'%3E%3Cstop offset='0' stop-color='%236359FF'/%3E%3Cstop offset='1' stop-color='%23CF6'/%3E%3C/linearGradient%3E%3ClinearGradient id='b' x1='0' x2='0' y1='0' y2='1' gradientTransform='rotate(112,0.5,0.5)'%3E%3Cstop offset='0' stop-color='%23FF6049'/%3E%3Cstop offset='1' stop-color='%23FFCA42'/%3E%3C/linearGradient%3E%3C/defs%3E%3Cg fill='%23FFF' fill-opacity='0' stroke-miterlimit='10'%3E%3Cg stroke='url(%23a)' stroke-width='9.239999999999998'%3E%3Cpath transform='translate(-91 -32.4) rotate(-34.5 1409 581) scale(0.7250099999999999)' d='M1409 581 1450.35 511 1490 581z'/%3E%3Ccircle stroke-width='3.08' transform='translate(-251.5 109) rotate(-14.8 800 450) scale(0.9596709999999998)' cx='500' cy='100' r='40'/%3E%3Cpath transform='translate(-53.9 100.5) rotate(-195.5 401 736) scale(0.9596709999999998)' d='M400.86 735.5h-83.73c0-23.12 18.74-41.87 41.87-41.87S400.86 712.38 400.86 735.5z'/%3E%3C/g%3E%3Cg stroke='url(%23b)' stroke-width='2.8'%3E%3Cpath transform='translate(654 51.4) rotate(-12.85 150 345) scale(1.07967)' d='M149.8 345.2 118.4 389.8 149.8 434.4 181.2 389.8z'/%3E%3Crect stroke-width='6.16' transform='translate(86.5 -320) rotate(-291.6 1089 759)' x='1039' y='709' width='100' height='100'/%3E%3Cpath transform='translate(-122 -10) rotate(-48.6 1400 132) scale(0.525)' d='M1426.8 132.4 1405.7 168.8 1363.7 168.8 1342.7 132.4 1363.7 96 1405.7 96z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        background-attachment: fixed;
        background-size: cover;
      }
    </style>
  </head>
  <body class="flex flex-col h-full text-white">
    <header class="h-1/4 flex justify-center items-center">
      <h1 class="text-5xl font-bold">ðŸ¥ž Stack Generator</h1>
    </header>

    <section
      class="
        h-2/4
        flex flex-col
        items-center
        max-w-max
        sm:max-w-screen-lg
        w-full
        mx-auto
      "
    >
      <form id="input-form" class="flex gap-1 w-full">
        <input
          type="text"
          placeholder="Enter acronym here..."
          class="p-2 border bg-gray-700 border-gray-600 rounded w-3/4 shadow"
          maxlength="50"
          minlength="1"
        />

        <button
          type="submit"
          title="Click to calculate stack from the given input"
          class="
            w-1/4
            border border-blue-700
            rounded
            px-4
            py-2
            bg-blue-600
            text-white
            shadow
          "
        >
          Stackify me captain
        </button>
      </form>

      <div id="result" class="w-full"></div>
    </section>

    <footer
      class="
        h-1/4
        text-3xl text-white
        max-w-max
        sm:max-w-screen-lg
        w-full
        mx-auto
        flex
        justify-center
        items-center
      "
    >
      <a
        class="opacity-75 hover:opacity-100"
        title="View the Github project for Stack Generator"
        href="https://github.com/ganderzz/Stack-Generator"
        ><i class="fab fa-github"></i
      ></a>

      <i
        class="
          block
          border-l border-gray-500
          text-xs
          ml-8
          pl-6
          opacity-70
          hover:opacity-100
        "
        >Background by:
        <a
          title="View the SVG Background's website"
          href="https://www.svgbackgrounds.com/"
          >svg backgrounds</a
        ></i
      >
    </footer>

    <script>
      function transformToMap(arr) {
        return arr.reduce((accu, current) => {
          const startingLetter = current[0].toLocaleLowerCase();

          if (accu[startingLetter]) {
            return {
              ...accu,
              [startingLetter]: [...accu[startingLetter], current],
            };
          }

          return {
            ...accu,
            [startingLetter]: [current],
          };
        }, {});
      }

      // List of all stack technologies.
      // It's easier to add new items to an array, but it's easier to query technologies from a dictionary.
      // So here we create an array, then on startup transform the data to a `{ "character": [technologies] }` format.
      const stackItems = transformToMap([
        // Business stack
        "Excel",
        "Word",
        "Powerpoint",

        // Container stuff
        "Docker",
        "Helm",
        "Kubernetes",
        "Istio",

        // Cloud Providers
        "Azure",
        "Google Cloud",
        "AWS",

        // Web Servers
        "Apache",
        "IIS",
        "NGINX",

        // Languages
        "C",
        "C#",
        "C++",
        "Java",
        "Python",
        "DLang",
        "PHP",
        "Swift",
        "JavaScript",
        "COBOL",
        "Haskell",
        "Go",
        "CSS",
        "HTML",
        "Kotlin",
        "Groovy",
        "OCaml",
        "Zig",
        "Nim",
        "Ruby",
        "Crystal",
        "F#",
        "Basic",
        "Erlang",
        "Elixir",
        "Visual Basic",
        "Typescript",
        "QBasic",

        // Terminal
        "Bash",
        "Powershell",

        // Data-languages
        "TOML",
        "YAML",
        "JSON",
        "XML",

        // Frameworks
        "NodeJS",
        "React",
        "Vue",
        "Flask",
        "Django",
        "Angular",
        "Svelte",
        "Laravel",
        "Phoenix",
        "ASP.NET",
        "Spring",
        "Godot",
        "Unity",
        "Unreal Engine 4",

        // Databases
        "MongoDB",
        "MySQL",
        "CouchDB",
        "Redis",
        "MariaDB",
        "SQLite",
        "Elasticsearch",
        "Kabana",
        "Cassandra",
        "Microsoft Access",
        "Splunk",
        "SQLServer",
        "Oracle DB",
        "PostgresSQL",
        "NoSQL",
        "Neo4j",
        "DGraph",

        // Operating Systems
        "Linux",
        "Windows",
        "MacOS",
        "UNIX",
        "Ubuntu",
      ]);

      window.onload = function () {
        const resultElem = document.querySelector("#result");
        const formElem = document.querySelector("#input-form");

        /**
         * Updates the search query params with a given object.
         */
        function updateURL(obj) {
          const query = new URLSearchParams(obj);
          const newurl = `${window.location.protocol}//${window.location.host}${
            window.location.pathname
          }?${query.toString()}`;

          window.history.pushState({ path: newurl }, null, newurl);
        }

        function calculateStack(input) {
          if (!input) {
            alert("Invalid input.");
            return;
          }

          // Grab a technology based on the characters of the text input.
          const chars = input.split("").map((p) => p.toLocaleLowerCase());
          const match = chars
            .map((item) => {
              if (item === " ") {
                return " ";
              }

              const set = stackItems[item];
              if (!set) {
                return "n/a";
              }

              return set[Math.floor(set.length * Math.random())];
            })
            .join("<br />");

          resultElem.innerHTML = `<div class="bg-gray-800 mt-6 w-full text-white shadow text-3xl rounded p-8">${match}</div>`;
          return match;
        }

        /**
         * Handles generating a random stack once the form is submitted.
         */
        formElem.addEventListener("submit", (e) => {
          e.preventDefault();

          // Gets the text input content in the form.
          const inputValue = [...e.target.elements]
            .filter((p) => p.type === "text")
            ?.map((p) => p.value.toLocaleLowerCase())?.[0];

          const query = calculateStack(inputValue);

          updateURL({ query: inputValue });
        });

        function updateSearchBasedOnURL() {
          const params = new URLSearchParams(window.location.search);
          const query = params.get("query");

          if (!query) {
            return;
          }

          formElem.querySelector("input").value = query;
          calculateStack(query);
        }
        updateSearchBasedOnURL();
      };
    </script>
  </body>
</html>
